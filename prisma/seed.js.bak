/* eslint-disable no-console */
const { PrismaClient } = require('@prisma/client');
const bcrypt = require('bcryptjs');

const prisma = new PrismaClient();

async function main() {
  const email = process.env.ADMIN_EMAIL || 'admin@elsys.bg';
  const password = process.env.ADMIN_PASSWORD || 'admin123';
  const name = 'Admin';

  const hash = await bcrypt.hash(password, 10);

  const user = await prisma.user.upsert({
    where: { email },
    update: { name, password: hash, role: 'ADMIN' },
    create: { email, name, password: hash, role: 'ADMIN' },
  });

  console.log('Admin user ensured:', { id: user.id, email: user.email });

  // Seed news articles
  const newsArticles = [
    {
      id: 'graduation-ceremony-2026',
      locale: 'bg',
      title: 'Успешна церемония по дипломиране на випуск 2026',
      excerpt: 'На 15 юни се състоя тържествена церемония по дипломиране на завършващия випуск от ТУЕС',
      bodyMarkdown: `# Церемония по дипломиране

На 15 юни 2026 година се състоя тържествена церемония по дипломиране на випуск 2026 от Технологично училище "Електронни системи" към ТУ-София.

## Постиженията на випуска

Завършващите ученици демонстрираха изключителни постижения в областта на софтуерните технологии и електронните системи. Повече от 85% от випускниците вече имат предложения за работа от водещи технологични компании.

## Награди и отличия

Специални награди получиха отличниците, както и ученици, отличили се с принос към училищната общност и с изключителни проекти.

Поздравяваме всички завършващи и им пожелаваме успешна реализация!`,
      blocks: [
        { id: 'blk-1', type: 'Heading', props: { text: 'Церемония по дипломиране', level: 'h2' } },
        { id: 'blk-2', type: 'Paragraph', props: { content: 'На 15 юни 2026 година се състоя тържествена церемония по дипломиране на випуск 2026 от Технологично училище "Електронни системи" към ТУ-София.' } },
        { id: 'blk-3', type: 'Heading', props: { text: 'Постиженията на випуска', level: 'h3' } },
        { id: 'blk-4', type: 'Paragraph', props: { content: 'Завършващите ученици демонстрираха изключителни постижения в областта на софтуерните технологии и електронните системи. Повече от 85% от випускниците вече имат предложения за работа от водещи технологични компании.' } },
        { id: 'blk-5', type: 'Heading', props: { text: 'Награди и отличия', level: 'h3' } },
        { id: 'blk-6', type: 'Paragraph', props: { content: 'Специални награди получиха отличниците, както и ученици, отличили се с принос към училищната общност и с изключителни проекти.' } },
        { id: 'blk-7', type: 'Callout', props: { type: 'success', title: 'Поздравления', content: 'Поздравяваме всички завършващи и им пожелаваме успешна реализация!' } },
      ],
      useBlocks: true,
      date: new Date('2026-06-15'),
      featuredImage: '/images/news/graduation-2026.jpg',
      published: true,
    },
    {
      id: 'graduation-ceremony-2026',
      locale: 'en',
      title: 'Successful Graduation Ceremony 2026',
      excerpt: 'The graduation ceremony for the class of 2026 took place on June 15th at ELSYS',
      bodyMarkdown: `# Graduation Ceremony

On June 15, 2026, the graduation ceremony for the class of 2026 from the Technological School of Electronic Systems at Technical University - Sofia took place.

## Class Achievements

The graduating students demonstrated exceptional achievements in software technologies and electronic systems. Over 85% of graduates already have job offers from leading tech companies.

## Awards and Honors

Special awards were given to honor students and those who contributed to the school community with outstanding projects.

Congratulations to all graduates and best wishes for successful careers!`,
      blocks: [
        { id: 'blk-1', type: 'Heading', props: { text: 'Graduation Ceremony', level: 'h2' } },
        { id: 'blk-2', type: 'Paragraph', props: { content: 'On June 15, 2026, the graduation ceremony for the class of 2026 from the Technological School of Electronic Systems at Technical University - Sofia took place.' } },
        { id: 'blk-3', type: 'Heading', props: { text: 'Class Achievements', level: 'h3' } },
        { id: 'blk-4', type: 'Paragraph', props: { content: 'The graduating students demonstrated exceptional achievements in software technologies and electronic systems. Over 85% of graduates already have job offers from leading tech companies.' } },
        { id: 'blk-5', type: 'Heading', props: { text: 'Awards and Honors', level: 'h3' } },
        { id: 'blk-6', type: 'Paragraph', props: { content: 'Special awards were given to honor students and those who contributed to the school community with outstanding projects.' } },
        { id: 'blk-7', type: 'Callout', props: { type: 'success', title: 'Congratulations', content: 'Congratulations to all graduates and best wishes for successful careers!' } },
      ],
      useBlocks: true,
      date: new Date('2026-06-15'),
      featuredImage: '/images/news/graduation-2026.jpg',
      published: true,
    },
    {
      id: 'hackathon-winners-2026',
      locale: 'bg',
      title: 'Ученици от ТУЕС спечелиха национален хакатон',
      excerpt: 'Екип от 11 клас завоюва първо място на National Code Challenge 2026',
      bodyMarkdown: `# Победа на национален хакатон

Екип от трима ученици от 11 клас на ТУЕС завоюва първо място на престижния National Code Challenge 2026.

## Проектът

Младите програмисти разработиха иновативна платформа за управление на градски транспорт в реално време, която използва AI за оптимизация на маршрутите.

## Награди

Освен паричната награда от 5000 лева, победителите получиха стипендии за участие в международни технологични конференции и менторство от водещи софтуерни инженери.`,
      blocks: [
        { id: 'blk-1', type: 'Heading', props: { text: 'Победа на национален хакатон', level: 'h2' } },
        { id: 'blk-2', type: 'Paragraph', props: { content: 'Екип от трима ученици от 11 клас на ТУЕС завоюва първо място на престижния National Code Challenge 2026.' } },
        { id: 'blk-3', type: 'Heading', props: { text: 'Проектът', level: 'h3' } },
        { id: 'blk-4', type: 'Paragraph', props: { content: 'Младите програмисти разработиха иновативна платформа за управление на градски транспорт в реално време, която използва AI за оптимизация на маршрутите.' } },
        { id: 'blk-5', type: 'Heading', props: { text: 'Награди', level: 'h3' } },
        { id: 'blk-6', type: 'List', props: { style: 'bullet', items: [
          { text: 'Парична награда от 5000 лева' },
          { text: 'Стипендии за международни технологични конференции' },
          { text: 'Менторство от водещи софтуерни инженери' }
        ]}},
      ],
      useBlocks: true,
      date: new Date('2026-05-20'),
      featuredImage: '/images/news/hackathon-2026.jpg',
      published: true,
    },
    {
      id: 'hackathon-winners-2026',
      locale: 'en',
      title: 'ELSYS Students Win National Hackathon',
      excerpt: 'An 11th grade team won first place at National Code Challenge 2026',
      bodyMarkdown: `# National Hackathon Victory

A team of three 11th grade students from ELSYS won first place at the prestigious National Code Challenge 2026.

## The Project

The young programmers developed an innovative real-time urban transport management platform that uses AI to optimize routes.

## Awards

In addition to the cash prize of 5,000 BGN, the winners received scholarships to attend international tech conferences and mentorship from leading software engineers.`,
      blocks: [
        { id: 'blk-1', type: 'Heading', props: { text: 'National Hackathon Victory', level: 'h2' } },
        { id: 'blk-2', type: 'Paragraph', props: { content: 'A team of three 11th grade students from ELSYS won first place at the prestigious National Code Challenge 2026.' } },
        { id: 'blk-3', type: 'Heading', props: { text: 'The Project', level: 'h3' } },
        { id: 'blk-4', type: 'Paragraph', props: { content: 'The young programmers developed an innovative real-time urban transport management platform that uses AI to optimize routes.' } },
        { id: 'blk-5', type: 'Heading', props: { text: 'Awards', level: 'h3' } },
        { id: 'blk-6', type: 'List', props: { style: 'bullet', items: [
          { text: 'Cash prize of 5,000 BGN' },
          { text: 'Scholarships for international tech conferences' },
          { text: 'Mentorship from leading software engineers' }
        ]}},
      ],
      useBlocks: true,
      date: new Date('2026-05-20'),
      featuredImage: '/images/news/hackathon-2026.jpg',
      published: true,
    },
    {
      id: 'new-laboratory-opening',
      locale: 'bg',
      title: 'Откриване на нова лаборатория по роботика',
      excerpt: 'ТУЕС откри модерна лаборатория по роботика и изкуствен интелект',
      bodyMarkdown: `# Нова лаборатория по роботика

На 10 април ТУЕС официално откри най-модерната лаборатория по роботика и изкуствен интелект в България.

## Оборудване

Лабораторията е оборудвана с:
- 20 роботизирани комплекта за обучение
- VR системи за симулация
- 3D принтери
- Специализиран софтуер за моделиране

## Партньори

Проектът беше реализиран с подкрепата на водещи технологични компании и Техническия университет - София.`,
      blocks: [
        { id: 'blk-1', type: 'Heading', props: { text: 'Нова лаборатория по роботика', level: 'h2' } },
        { id: 'blk-2', type: 'Paragraph', props: { content: 'На 10 април ТУЕС официално откри най-модерната лаборатория по роботика и изкуствен интелект в България.' } },
        { id: 'blk-3', type: 'Heading', props: { text: 'Оборудване', level: 'h3' } },
        { id: 'blk-4', type: 'List', props: { style: 'check', items: [
          { text: '20 роботизирани комплекта за обучение' },
          { text: 'VR системи за симулация' },
          { text: '3D принтери' },
          { text: 'Специализиран софтуер за моделиране' }
        ]}},
        { id: 'blk-5', type: 'Heading', props: { text: 'Партньори', level: 'h3' } },
        { id: 'blk-6', type: 'Paragraph', props: { content: 'Проектът беше реализиран с подкрепата на водещи технологични компании и Техническия университет - София.' } },
      ],
      useBlocks: true,
      date: new Date('2026-04-10'),
      featuredImage: '/images/news/robotics-lab.jpg',
      published: true,
    },
    {
      id: 'new-laboratory-opening',
      locale: 'en',
      title: 'Opening of New Robotics Laboratory',
      excerpt: 'ELSYS opened a modern robotics and artificial intelligence laboratory',
      bodyMarkdown: `# New Robotics Laboratory

On April 10, ELSYS officially opened Bulgaria's most modern robotics and artificial intelligence laboratory.

## Equipment

The laboratory is equipped with:
- 20 educational robotics kits
- VR simulation systems
- 3D printers
- Specialized modeling software

## Partners

The project was realized with the support of leading tech companies and the Technical University - Sofia.`,
      date: new Date('2026-04-10'),
      featuredImage: '/images/news/robotics-lab.jpg',
      published: true,
    },
    {
      id: 'international-olympiad-medals',
      locale: 'bg',
      title: 'Медали от международна олимпиада по информатика',
      excerpt: 'Трима ученици спечелиха медали на международната олимпиада в Токио',
      bodyMarkdown: `# Международен успех

Три ученици от ТУЕС се завърнаха с медали от Международната олимпиада по информатика, проведена в Токио, Япония.

## Резултати

- Златен медал - Иван Петров, 12 клас
- Сребърен медал - Мария Димитрова, 11 клас
- Бронзов медал - Георги Стоянов, 11 клас

## Подготовка

Учениците се подготвяха под ръководството на опитни преподаватели и с подкрепата на alumni мрежата на училището.`,
      date: new Date('2026-03-15'),
      featuredImage: '/images/news/olympiad-medals.jpg',
      published: true,
    },
    {
      id: 'international-olympiad-medals',
      locale: 'en',
      title: 'Medals from International Informatics Olympiad',
      excerpt: 'Three students won medals at the international olympiad in Tokyo',
      bodyMarkdown: `# International Success

Three students from ELSYS returned with medals from the International Informatics Olympiad held in Tokyo, Japan.

## Results

- Gold medal - Ivan Petrov, 12th grade
- Silver medal - Maria Dimitrova, 11th grade
- Bronze medal - Georgi Stoyanov, 11th grade

## Preparation

Students were trained under the guidance of experienced teachers and with the support of the school's alumni network.`,
      date: new Date('2026-03-15'),
      featuredImage: '/images/news/olympiad-medals.jpg',
      published: true,
    },
    {
      id: 'open-doors-day-spring',
      locale: 'bg',
      title: 'Ден на отворените врати - пролет 2026',
      excerpt: 'Поканете се на деня на отворените врати на 25 март за да опознаете ТУЕС',
      bodyMarkdown: `# Ден на отворените врати

На 25 март ви каним на Ден на отворените врати в ТУЕС!

## Програма

- 10:00 - Официално откриване и презентация на училището
- 11:00 - Разходка из лабораториите
- 12:00 - Демонстрации на ученически проекти
- 13:00 - Среща с преподаватели и ученици
- 14:00 - Въпроси и отговори

## Регистрация

Регистрацията е задължителна. Моля запишете се онлайн до 20 март.

Очакваме ви!`,
      date: new Date('2026-02-20'),
      featuredImage: '/images/news/open-doors.jpg',
      published: true,
    },
    {
      id: 'open-doors-day-spring',
      locale: 'en',
      title: 'Open Doors Day - Spring 2026',
      excerpt: 'Join us on March 25th to get to know ELSYS',
      bodyMarkdown: `# Open Doors Day

On March 25th, we invite you to the ELSYS Open Doors Day!

## Program

- 10:00 AM - Official opening and school presentation
- 11:00 AM - Laboratory tour
- 12:00 PM - Student project demonstrations
- 1:00 PM - Meet with teachers and students
- 2:00 PM - Q&A session

## Registration

Registration is required. Please register online by March 20th.

We look forward to seeing you!`,
      date: new Date('2026-02-20'),
      featuredImage: '/images/news/open-doors.jpg',
      published: true,
    },
    {
      id: 'tech-company-partnership',
      locale: 'bg',
      title: 'Ново партньорство с водеща софтуерна компания',
      excerpt: 'ТУЕС подписа договор за сътрудничество с международна технологична компания',
      bodyMarkdown: `# Стратегическо партньорство

ТУЕС подписа договор за дългосрочно партньорство с водеща международна софтуерна компания.

## Ползи за учениците

Партньорството включва:
- Летни стажантски програми
- Менторство от индустриални експерти
- Достъп до модерни технологии и инструменти
- Възможности за кариерно развитие

## Общи проекти

Компанията ще подкрепя развитието на специализирани курсове и ще предоставя реални проекти за учениците.`,
      date: new Date('2026-02-05'),
      featuredImage: '/images/news/partnership.jpg',
      published: true,
    },
    {
      id: 'tech-company-partnership',
      locale: 'en',
      title: 'New Partnership with Leading Software Company',
      excerpt: 'ELSYS signed a cooperation agreement with an international tech company',
      bodyMarkdown: `# Strategic Partnership

ELSYS signed a long-term partnership agreement with a leading international software company.

## Benefits for Students

The partnership includes:
- Summer internship programs
- Mentorship from industry experts
- Access to modern technologies and tools
- Career development opportunities

## Joint Projects

The company will support the development of specialized courses and provide real projects for students.`,
      date: new Date('2026-02-05'),
      featuredImage: '/images/news/partnership.jpg',
      published: true,
    },
    {
      id: 'sports-tournament-victory',
      locale: 'bg',
      title: 'Спортна победа на училищния отбор',
      excerpt: 'Футболният отбор на ТУЕС спечели междуучилищния турнир',
      bodyMarkdown: `# Спортен успех

Футболният отбор на ТУЕС спечели престижния междуучилищен турнир "София Къп 2026".

## Финалът

В драматичен финал нашите момчета победиха отбора на СМГ с резултат 3:2.

## Отборът

Поздравяваме целия отбор, треньорите и всички които подкрепиха нашите спортисти!

ТУЕС не е само код и електроника - тук развиваме и спортния дух!`,
      date: new Date('2026-01-25'),
      featuredImage: '/images/news/football-victory.jpg',
      published: true,
    },
    {
      id: 'sports-tournament-victory',
      locale: 'en',
      title: 'Sports Victory for School Team',
      excerpt: 'ELSYS football team won the inter-school tournament',
      bodyMarkdown: `# Sports Success

The ELSYS football team won the prestigious inter-school tournament "Sofia Cup 2026".

## The Final

In a dramatic final, our boys defeated the SMG team with a score of 3:2.

## The Team

Congratulations to the entire team, coaches, and everyone who supported our athletes!

ELSYS is not just code and electronics - we develop sportsmanship too!`,
      date: new Date('2026-01-25'),
      featuredImage: '/images/news/football-victory.jpg',
      published: true,
    },
    {
      id: 'alumni-meetup-january',
      locale: 'bg',
      title: 'Среща с alumni - януари 2026',
      excerpt: 'Успешна среща с випускници, работещи в международни компании',
      bodyMarkdown: `# Alumni среща

На 12 януари се състоя поредната среща с випускници на ТУЕС.

## Гости

Сред гостите бяха:
- Петър Георгиев - Senior Software Engineer в Google
- Анна Михайлова - Data Scientist в Microsoft
- Стефан Николов - CTO на български стартъп

## Теми

Випускниците споделиха своя опит от работата в индустрията, дадоха съвети на настоящите ученици и отговориха на въпроси за кариерно развитие.

## Следваща среща

Следващата alumni среща се планира за май 2026.`,
      date: new Date('2026-01-12'),
      featuredImage: '/images/news/alumni-meetup.jpg',
      published: true,
    },
    {
      id: 'alumni-meetup-january',
      locale: 'en',
      title: 'Alumni Meetup - January 2026',
      excerpt: 'Successful meetup with graduates working in international companies',
      bodyMarkdown: `# Alumni Meetup

On January 12, another ELSYS alumni meetup took place.

## Guests

Among the guests were:
- Petar Georgiev - Senior Software Engineer at Google
- Anna Mihaylova - Data Scientist at Microsoft
- Stefan Nikolov - CTO of a Bulgarian startup

## Topics

The alumni shared their industry experience, gave advice to current students, and answered questions about career development.

## Next Meetup

The next alumni meetup is planned for May 2026.`,
      date: new Date('2026-01-12'),
      featuredImage: '/images/news/alumni-meetup.jpg',
      published: true,
    },
    {
      id: 'coding-workshop-series',
      locale: 'bg',
      title: 'Нова серия от coding workshops',
      excerpt: 'Стартира поредица от специализирани workshops по съвременни технологии',
      bodyMarkdown: `# Coding Workshops 2026

През февруари стартира нова серия от workshops по актуални теми в софтуерното инженерство.

## Теми

- Web3 и blockchain технологии
- Machine Learning основи
- Cloud-native разработка
- Mobile development с Flutter
- Game development

## Формат

Всеки workshop включва теоретична част и практически проект. Участието е безплатно за ученици от ТУЕС.

## Регистрация

Регистрацията за първия workshop е вече отворена!`,
      date: new Date('2026-01-08'),
      featuredImage: '/images/news/workshops.jpg',
      published: true,
    },
    {
      id: 'coding-workshop-series',
      locale: 'en',
      title: 'New Series of Coding Workshops',
      excerpt: 'A series of specialized workshops on modern technologies is starting',
      bodyMarkdown: `# Coding Workshops 2026

A new series of workshops on current topics in software engineering starts in February.

## Topics

- Web3 and blockchain technologies
- Machine Learning basics
- Cloud-native development
- Mobile development with Flutter
- Game development

## Format

Each workshop includes a theoretical part and a practical project. Participation is free for ELSYS students.

## Registration

Registration for the first workshop is now open!`,
      date: new Date('2026-01-08'),
      featuredImage: '/images/news/workshops.jpg',
      published: true,
    },
  ];

  console.log('Seeding news articles...');
  
  for (const article of newsArticles) {
    await prisma.newsPost.upsert({
      where: { 
        id_locale: { 
          id: article.id, 
          locale: article.locale 
        } 
      },
      update: article,
      create: { ...article, authorId: user.id },
    });
  }

  console.log(`✓ Seeded ${newsArticles.length} news articles (${newsArticles.length / 2} unique articles in 2 languages)`);
}

main()
  .catch((e) => {
    console.error(e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
